# HospitalGeneratorRDF

aaa

## 1. Data Structure

aaa


## 2.Installation
The source code is currently hosted on [github.com/LorenaPujante/HospitalGeneratorRDF](https://github.com/LorenaPujante/HospitalGeneratorRDF).

The program is in Python 3.10, and no external packages are needed.

## 3. Input
The input for HospitalGeneratorRDF must be: 
- The two files obtained as output from [H-Outbreak](https://github.com/denissekim/Simulation-Model): _movements.csv_ and _patients.csv_
- An additional file with the hospital layout from H-Outbreak: _hospital.txt_.
	- To get this file, we need to modify the file _hospital.py_ from H-Outbreak by adding the `printHospital()` function from _Modifications/modification.py_. Then, call the new function at the end of `initialize_hospital()`, just before the `return L`.     
These three files must be in folder _Input_.

## 4. Execution and Configuration Params
To run the program, in the terminal, go to the folder containing the program and run: `python main.py`

The main function receives as parameters the following:
- _index_: Index to start numbering (property _id_) the objects that are created to complete the hospital layout. It is recommended that this index be greater than the last _id_ of the elements in the H-Outrbreak hospital layout.
- _huPerService_: Number of HospitalizationUnits to create per Service.
- _nFloors_: Number of Floors that the hospital will have. This number must be greater or equal to 2.
- _huPerFloor_: Number of HospitalizationUnits that each Floor (except the ground floor) will have.
- _nRows_, _nColumns_: Number of rows and columns that the grill that divides each Floor (except the ground floor) will have.
- _startDateTime_: Date and time of the first step from the simulation generated by H-Outbreak. The next steps will be dated from this parameter.
- _optionFloorHU_: When it is not possible to create a suitable hospital layout that has the specified number of HospUnits per Floor, with this parameter, we select if we want to keep the number of Floors and modify `huPerFloor` or to keep the number of HospUnits per Floor and modify `nFloors`.

The `main()` function also has commented function calls to request these parameters per terminal.

At the end of _main.py_, before the call to `main()` function, we have set some example values for the parameters. We have also uploaded three example input files in _Input_.


## 5. Outcomes
After running the program, the following folders are created:
- _OutputCSV_: Folder with the nodes and edges of the graph in the form of CSV files.
	- Nodes and edges are in different folders: `OutputCSV/Classes` (nodes) and `OutputCSV/CSV` (edges). Each class of nodes and edges is in a separate file.
- _OutputRDF_: Folder with the nodes and edges of the RDF knowledge graph in the form of N-Triples files.
	- Nodes and edges are in different folders: `OutputRDF/Classes` (nodes) and `OutputRDF/CSV` (edges). Each class of nodes and edges is in a separate file. Inside each folder, there also is a file with the union of all the nodes (`OutputRDF/Classes/Classes_complete.nt`) and the union of all the edges (`OutputRDF/Relations/Relations_complete.nt`), respectively. Finally, the file `OutputRDF/data_complete.*.nt` contains the nodes and edges' union.
- _OutputRDF_star_: Folder with the nodes and edges of the RDF* knowledge graph in the form of N-Triples files (nodes) and Turtle files (edges).
	- Nodes and edges are in different folders: `OutputRDF_star/Classes` (nodes) and `OutputRDF_star/CSV` (edges). Each class of nodes and edges is in a separate file. Inside each folder, there also is a file with the union of all the nodes (`/Classes.*/Classes_complete.nt`) and the union of all the edges (`OutputRDF_star/Relations.*/Relations_complete.ttl`), respectively. Finally, the file `OutputRDF_star/data_complete.ttl` contains the nodes and edges' union.
- _OutputSummary_: Folder with two summary files:
  - _EpisodeSummary.txt_: This file shows for each patients how many Episodes and Events with their _description_, _id_ and _start_ and _end dates_. For Events, it also shows their subclass and to which Bed they are connected.
  - _HospitalSummary.txt_: This file shows a list with all the Services, HopitalizationUnits and Locations of the hospital. For each element, it presents its id, description and several lists with all the other elements of the spatial dimmension to which it is connected.     

Repeated runs will replace existing files.
